description: >
  Log into the Humanitec registry
parameters:
  humanitec_token:
    type: env_var_name
    default: HUMANITEC_TOKEN
    description: Token to access Humanitec.
  organization:
    type: string
    default: ""
    description: Name of the organization in Humanitec.
  humanitec_api:
    type: string
    default: https://api.humanitec.io
    description: URL of the API to be used.
steps:
  - run:
      name: Get credentials for the Humanitec registry
      command: |
        fetch(`<< parameters.humanitec_api >>/orgs/<< paramsters.organization >>/registries/humanitec/creds`, { \
          headers: {'Authorization': `Bearer ${<< parameters.humanitec_token}`}, \
          })