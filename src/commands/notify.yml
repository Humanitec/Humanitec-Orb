description: >
  Notify Humanitec about a new available build
parameters:
  organization:
    type: string
    default:
    description: "Name of the organization in Humanitec"
  module_name:
    type: string
    default:
    description: "Name of the module in Humanitec"
  image_name:
    type: string
    default:
    description: "Name of the image"
  humanitec_api:
    type: string
    default: "https://api.humanitec.io"
    description: "URL of the API to be used"
steps:
  - run:
      name: Notify Humanitec
      command: |
        curl -XPOST \
          -H 'Authorization: Bearer '${HUMANITEC_TOKEN} \
          -H 'Content-type: application/json' \
          -d '{\"commit\": \"commit_orb\", \"branch\": \"branch_orb\", \"image\": \"image_orb\"}' \
          'https://staging-api.humanitec.io/orgs/humanitec-demo/modules/hugo-app/builds'
